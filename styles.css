/* @settings

name: YAAE — Why Author Anywhere Else
id: yaae
settings:
  -
    id: yaae-prose-heading
    title: Prose Highlighting
    type: heading
    level: 1
    collapsed: true
  -
    id: yaae-pos-adjective-color
    title: Adjective color
    type: variable-color
    format: hex
    default: '#b97a0a'
  -
    id: yaae-pos-noun-color
    title: Noun color
    type: variable-color
    format: hex
    default: '#ce4924'
  -
    id: yaae-pos-adverb-color
    title: Adverb color
    type: variable-color
    format: hex
    default: '#c333a7'
  -
    id: yaae-pos-verb-color
    title: Verb color
    type: variable-color
    format: hex
    default: '#177eB8'
  -
    id: yaae-pos-conjunction-color
    title: Conjunction color
    type: variable-color
    format: hex
    default: '#01934e'
  -
    id: yaae-syntax-heading
    title: Syntax Dimming
    type: heading
    level: 1
    collapsed: true
  -
    id: yaae-syntax-dimming-opacity
    title: Dimmed opacity
    description: Opacity of markdown formatting characters (**, #, etc.)
    type: variable-number-slider
    default: 0.3
    min: 0
    max: 1
    step: 0.05
  -
    id: yaae-syntax-dimming-active-opacity
    title: Active line opacity
    description: Opacity of formatting characters on the active line
    type: variable-number-slider
    default: 0.7
    min: 0
    max: 1
    step: 0.05
  -
    id: yaae-focus-heading
    title: Focus Mode
    type: heading
    level: 1
    collapsed: true
  -
    id: yaae-dimmed-color
    title: Dimmed text color
    description: Color applied to unfocused text (defaults to --text-faint)
    type: variable-color
    format: hex
    default: '#'
  -
    id: yaae-dimmed-transition
    title: Fade transition
    description: Transition duration for focus dimming
    type: variable-text
    default: 0.15s
  -
    id: yaae-gutter-heading
    title: Guttered Headings
    type: heading
    level: 1
    collapsed: true
  -
    id: yaae-gutter-width
    title: Gutter width
    description: Width reserved for heading markers in the gutter
    type: variable-number-slider
    default: 40
    min: 20
    max: 80
    step: 4
    format: px
  -
    id: yaae-print-heading
    title: PDF Print Styles
    type: heading
    level: 1
    collapsed: true
  -
    id: yaae-print-code-heading
    title: Code Blocks
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-code-border-color
    title: Code border color
    type: variable-color
    format: hex
    default: '#dddddd'
  -
    id: yaae-print-code-border-radius
    title: Code border radius
    type: variable-text
    default: 4px
  -
    id: yaae-print-code-padding
    title: Code padding
    type: variable-text
    default: 0.8em
  -
    id: yaae-print-code-bg
    title: Code background color
    type: variable-color
    format: hex
    default: '#f8f8f8'
  -
    id: yaae-print-code-font-size
    title: Code font size
    type: variable-text
    default: 0.9em
  -
    id: yaae-print-links-heading
    title: Links
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-link-url-font-size
    title: URL font size
    type: variable-text
    default: 0.8em
  -
    id: yaae-print-link-url-color
    title: URL color
    type: variable-color
    format: hex
    default: '#666666'
  -
    id: yaae-print-page-numbers-heading
    title: Page Numbers
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-page-number-bottom
    title: Bottom offset
    type: variable-number-slider
    default: 12
    min: 0
    max: 40
    step: 2
    format: px
  -
    id: yaae-print-page-number-right
    title: Right offset
    type: variable-number-slider
    default: 16
    min: 0
    max: 40
    step: 2
    format: px
  -
    id: yaae-print-page-number-font-size
    title: Font size
    type: variable-text
    default: 9px
  -
    id: yaae-print-page-number-color
    title: Color
    type: variable-color
    format: hex
    default: '#888888'
  -
    id: yaae-print-tables-heading
    title: Tables
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-table-font-size
    title: Table font size
    type: variable-text
    default: 0.85em
  -
    id: yaae-print-table-cell-padding
    title: Cell padding
    type: variable-text
    default: 4px 8px
  -
    id: yaae-print-toc-heading
    title: Table of Contents
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-toc-indent
    title: Nesting indent
    type: variable-text
    default: 1.5em
  -
    id: yaae-print-toc-item-margin
    title: Item margin
    type: variable-text
    default: 0.3em
  -
    id: yaae-print-toc-line-height
    title: Line height
    type: variable-text
    default: '1.4'
  -
    id: yaae-print-hf-heading
    title: Header / Footer
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-header-footer-font-size
    title: Font size
    type: variable-text
    default: 9px
  -
    id: yaae-print-header-footer-color
    title: Color
    type: variable-color
    format: hex
    default: '#888888'
  -
    id: yaae-print-dark-heading
    title: Dark Theme
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-dark-bg
    title: Background color
    type: variable-color
    format: hex
    default: '#1e1e1e'
  -
    id: yaae-print-dark-text
    title: Text color
    type: variable-color
    format: hex
    default: '#d4d4d4'
  -
    id: yaae-print-dark-heading-color
    title: Heading color
    type: variable-color
    format: hex
    default: '#e0e0e0'
  -
    id: yaae-print-dark-code-bg
    title: Code background
    type: variable-color
    format: hex
    default: '#2d2d2d'
  -
    id: yaae-print-dark-table-border
    title: Table border color
    type: variable-color
    format: hex
    default: '#444444'
  -
    id: yaae-print-banner-heading
    title: Classification Banners
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-banner-font-size
    title: Banner font size
    type: variable-text
    default: 10px
  -
    id: yaae-print-banner-letter-spacing
    title: Banner letter spacing
    type: variable-text
    default: 0.1em
  -
    id: yaae-print-banner-padding
    title: Banner padding
    type: variable-text
    default: 2px 0
  -
    id: yaae-print-typography-heading
    title: Typography
    type: heading
    level: 2
    collapsed: true
  -
    id: yaae-print-widows
    title: Widows
    description: Minimum lines of a paragraph at the top of a page
    type: variable-number-slider
    default: 3
    min: 1
    max: 6
    step: 1
  -
    id: yaae-print-orphans
    title: Orphans
    description: Minimum lines of a paragraph at the bottom of a page
    type: variable-number-slider
    default: 3
    min: 1
    max: 6
    step: 1

*/

/* ==========================================================================
   Custom Properties — defaults for all tunables
   ========================================================================== */

body {
  /* Prose highlighting — default iA Writer palette */
  --yaae-pos-adjective-color: #b97a0a;
  --yaae-pos-noun-color: #ce4924;
  --yaae-pos-adverb-color: #c333a7;
  --yaae-pos-verb-color: #177eB8;
  --yaae-pos-conjunction-color: #01934e;

  /* Syntax dimming */
  --yaae-syntax-dimming-opacity: 0.3;
  --yaae-syntax-dimming-active-opacity: 0.7;

  /* Focus mode */
  --yaae-dimmed-color: var(--text-faint);
  --yaae-dimmed-transition: 0.15s;

  /* Guttered headings */
  --yaae-gutter-width: 40px;

  /* PDF Print — Code Blocks */
  --yaae-print-code-border-color: #ddd;
  --yaae-print-code-border-radius: 4px;
  --yaae-print-code-padding: 0.8em;
  --yaae-print-code-bg: #f8f8f8;
  --yaae-print-code-font-size: 0.9em;

  /* PDF Print — Links */
  --yaae-print-link-url-font-size: 0.8em;
  --yaae-print-link-url-color: #666;

  /* PDF Print — Page Numbers */
  --yaae-print-page-number-bottom: 12px;
  --yaae-print-page-number-right: 16px;
  --yaae-print-page-number-font-size: 9px;
  --yaae-print-page-number-color: #888;

  /* PDF Print — Tables */
  --yaae-print-table-font-size: 0.85em;
  --yaae-print-table-cell-padding: 4px 8px;

  /* PDF Print — Table of Contents */
  --yaae-print-toc-indent: 1.5em;
  --yaae-print-toc-item-margin: 0.3em;
  --yaae-print-toc-line-height: 1.4;

  /* PDF Print — Header / Footer */
  --yaae-print-header-footer-font-size: 9px;
  --yaae-print-header-footer-color: #888;

  /* PDF Print — Dark Theme */
  --yaae-print-dark-bg: #1e1e1e;
  --yaae-print-dark-text: #d4d4d4;
  --yaae-print-dark-heading-color: #e0e0e0;
  --yaae-print-dark-code-bg: #2d2d2d;
  --yaae-print-dark-table-border: #444;

  /* PDF Print — Classification Banners */
  --yaae-print-banner-font-size: 10px;
  --yaae-print-banner-letter-spacing: 0.1em;
  --yaae-print-banner-padding: 2px 0;

  /* PDF Print — Typography */
  --yaae-print-widows: 3;
  --yaae-print-orphans: 3;
}

/* ==========================================================================
   Prose Highlighting — POS category and custom list class rules
   ========================================================================== */

.yaae-pos-adjective { color: var(--yaae-pos-adjective-color); }
.yaae-pos-noun { color: var(--yaae-pos-noun-color); }
.yaae-pos-adverb { color: var(--yaae-pos-adverb-color); }
.yaae-pos-verb { color: var(--yaae-pos-verb-color); }
.yaae-pos-conjunction { color: var(--yaae-pos-conjunction-color); }

/* ===== Print / PDF Export Suppression =====
 * Hide all prose highlighting decorations when printing or exporting to PDF.
 * Obsidian wraps PDF export content in a .print container.
 */
@media print {
  [class*="yaae-pos-"],
  [class*="yaae-list-"] {
    color: inherit !important;
  }

  /* Prevent content from overflowing off the printed page */
  * {
    max-width: 100%;
    box-sizing: border-box;
  }

  pre, code {
    white-space: pre-wrap;
    overflow-wrap: break-word;
  }

  table {
    table-layout: fixed;
    width: 100%;
    overflow-wrap: break-word;
  }

  img {
    max-width: 100%;
    height: auto;
  }

}

.print [class*="yaae-pos-"],
.print [class*="yaae-list-"] {
  color: inherit !important;
}

/* ==========================================================================
   Syntax Dimming
   Reduce opacity of markdown formatting characters while keeping them visible.
   Scoped to body.yaae-syntax-dimming so it can be toggled via body class.
   ========================================================================== */

body.yaae-syntax-dimming .cm-formatting {
  opacity: var(--yaae-syntax-dimming-opacity);
  transition: opacity 0.15s ease;
}

body.yaae-syntax-dimming .cm-active .cm-formatting {
  opacity: var(--yaae-syntax-dimming-active-opacity);
}

/* ==========================================================================
   Guttered Headings
   Push # heading markers into the left gutter so heading text aligns
   with body text. Uses negative margin on the formatting span.
   Scoped to body.yaae-guttered-headings.
   ========================================================================== */

body.yaae-guttered-headings .cm-content .cm-line {
  padding-left: var(--yaae-gutter-width);
}

body.yaae-guttered-headings .cm-content .cm-line .cm-formatting-header {
  display: inline-block;
  width: var(--yaae-gutter-width);
  margin-left: calc(-1 * var(--yaae-gutter-width));
  text-align: right;
  padding-right: 0.5em;
  box-sizing: border-box;
}

/* ==========================================================================
   Focus Mode
   Dim text outside the active sentence or paragraph.
   Applied via CM6 Decoration.mark() with class "yaae-dimmed".
   ========================================================================== */

.yaae-dimmed {
  color: var(--yaae-dimmed-color);
  transition: color var(--yaae-dimmed-transition) ease;
}

/* ==========================================================================
   Status Bar Toggles
   Clickable status bar items for quick feature toggling.
   ========================================================================== */

.yaae-statusbar-toggle {
  cursor: pointer;
}

.yaae-statusbar-toggle:hover {
  color: var(--text-accent);
}

/* ==========================================================================
   Settings Panel — Tabbed Navigation
   ========================================================================== */

.yaae-settings-nav {
  display: flex;
  gap: 4px;
  border-bottom: 1px solid var(--background-modifier-border);
  margin-bottom: 16px;
}

.yaae-settings-tab {
  padding: 8px 16px;
  border: none;
  background: none;
  color: var(--text-muted);
  cursor: pointer;
  font-size: var(--font-ui-small);
  font-weight: 500;
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
  transition: color 0.15s ease, border-color 0.15s ease;
}

.yaae-settings-tab:hover {
  color: var(--text-normal);
}

.yaae-settings-tab.is-active {
  color: var(--text-accent);
  border-bottom-color: var(--text-accent);
}

/* ==========================================================================
   Settings Panel — Collapsible Sections
   ========================================================================== */

.yaae-section-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 0;
  cursor: pointer;
  font-weight: var(--font-semibold);
  font-size: var(--font-ui-medium);
  color: var(--text-normal);
  border-bottom: 1px solid var(--background-modifier-border);
  margin-top: 12px;
  user-select: none;
}

.yaae-section-header:hover {
  color: var(--text-accent);
}

.yaae-section-chevron {
  display: flex;
  align-items: center;
  transition: transform 0.15s ease;
}

.yaae-section-header.is-expanded .yaae-section-chevron {
  transform: rotate(90deg);
}

.yaae-section-content {
  display: none;
  padding-top: 4px;
}

.yaae-section-content.is-expanded {
  display: block;
}
