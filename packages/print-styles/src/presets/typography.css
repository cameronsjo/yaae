@media print {
  /* Prevent orphaned headings */
  h1, h2, h3, h4 {
    page-break-after: avoid;
    break-after: avoid;
  }

  /* Keep headings with following content */
  h1 + *, h2 + *, h3 + *, h4 + * {
    break-before: avoid;
  }

  /* Prevent breaking inside block elements */
  pre, blockquote, table, img, .callout {
    break-inside: avoid;
  }

  /* Widow and orphan control */
  p {
    widows: var(--yaae-print-widows);
    orphans: var(--yaae-print-orphans);
  }

  /* Repeat table headers across pages */
  thead {
    display: table-header-group;
  }

  /* Prevent row splitting */
  table tr {
    break-inside: avoid;
  }

  /* Prevent horizontal overflow */
  * {
    max-width: 100%;
    box-sizing: border-box;
  }

  pre, code {
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
  }

  table {
    table-layout: fixed;
    width: 100%;
    word-break: break-word;
  }

  img {
    max-width: 100%;
    height: auto;
  }

  a {
    word-break: break-all;
  }

  /* Print-optimized sizes via CSS variables */
  :root {
    --print-font-size: 11pt;
    --print-line-height: 1.6;
    --print-heading-scale: 1.2;
  }

  body {
    font-size: var(--print-font-size);
    line-height: var(--print-line-height);
  }

  /* Heading scale: each level is heading-scale Ã— the next level's size.
     h6 = 1em, h5 = scale^1, h4 = scale^2, ..., h1 = scale^5 */
  h1 { font-size: calc(1em * var(--print-heading-scale) * var(--print-heading-scale) * var(--print-heading-scale) * var(--print-heading-scale) * var(--print-heading-scale)); }
  h2 { font-size: calc(1em * var(--print-heading-scale) * var(--print-heading-scale) * var(--print-heading-scale) * var(--print-heading-scale)); }
  h3 { font-size: calc(1em * var(--print-heading-scale) * var(--print-heading-scale) * var(--print-heading-scale)); }
  h4 { font-size: calc(1em * var(--print-heading-scale) * var(--print-heading-scale)); }
  h5 { font-size: calc(1em * var(--print-heading-scale)); }
  h6 { font-size: 1em; }
}
